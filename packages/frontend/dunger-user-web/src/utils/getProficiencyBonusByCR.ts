const crMap: Record<string, number> = {
  '0': 2,
  '1/8': 2,
  '1/4': 2,
  '1/2': 2,
  '1': 2,
  '2': 2,
  '3': 2,
  '4': 2,
  '5': 3,
  '6': 3,
  '7': 3,
  '8': 3,
  '9': 4,
  '10': 4,
  '11': 4,
  '12': 4,
  '13': 5,
  '14': 5,
  '15': 5,
  '16': 5,
  '17': 6,
  '18': 6,
  '19': 6,
  '20': 6,
  '21': 7,
  '22': 7,
  '23': 7,
  '24': 7,
  '25': 8,
  '26': 8,
  '27': 8,
  '28': 8,
  '29': 9,
  '30': 9
};

/**
 * Возвращает бонус мастерства по показателю опасности (CR) монстра.
 * Используется для определения силы монстра согласно правилам D&D 5e.
 *
 * @param cr - Показатель опасности (Challenge Rating), может быть числом или строкой (например, "1/2").
 * @returns Числовой бонус мастерства (от +2 до +9).
 */
export function getProficiencyBonusByCR(cr?: number | string): number {
  if (!cr) return 2;

  const key = typeof cr === 'number' ? cr.toString() : cr;
  return crMap[key] ?? 2;
}
